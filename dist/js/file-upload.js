let dropArea=document.getElementById("drop-area");function preventDefaults(e){e.preventDefault(),e.stopPropagation()}function highlight(e){dropArea.className="file-upload __highlight"}function unhighlight(e){dropArea.className="file-upload"}function handleDrop(e){handleFiles(e.dataTransfer.files)}["dragenter","dragover","dragleave","drop"].forEach(e=>{dropArea.addEventListener(e,preventDefaults,!1),document.body.addEventListener(e,preventDefaults,!1)}),["dragenter","dragover"].forEach(e=>{dropArea.addEventListener(e,highlight,!1)}),["dragleave","drop"].forEach(e=>{dropArea.addEventListener(e,unhighlight,!1)}),dropArea.addEventListener("drop",handleDrop,!1);let uploadProgress=[];function initializeProgress(e){uploadProgress=[];for(let r=e;r>0;r--)uploadProgress.push(0)}function updateProgress(e,r){uploadProgress[e]=r;let a=uploadProgress.reduce((e,r)=>e+r,0)/uploadProgress.length;console.debug("update",e,r,a)}function handleFiles(e){initializeProgress((e=[...e]).length),e.forEach(uploadFile),e.forEach(previewFile)}function uploadFile(e,r){var a=new XMLHttpRequest,o=new FormData;a.open("POST","https://api.cloudinary.com/v1_1/kurjoz/upload",!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.upload.addEventListener("progress",(function(e){console.log("Progress"),dropArea.className="file-upload __progress",updateProgress(r,100*e.loaded/e.total||100)})),a.addEventListener("readystatechange",(function(e){4==a.readyState&&200==a.status?(dropArea.className="file-upload __success",console.log("Success"),updateProgress(r,100)):4==a.readyState&&200!=a.status&&(dropArea.className="file-upload __error",console.log("Error"))})),o.append("upload_preset","obanzopa"),o.append("file",e),a.send(o)}